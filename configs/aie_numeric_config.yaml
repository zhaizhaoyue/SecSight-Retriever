# AIE[TRANSLATED]
# [TRANSLATED]RAG[TRANSLATED]，[TRANSLATED]

# [TRANSLATED]
stages:
  segmentation: true      # [TRANSLATED]
  retrieval: true         # [TRANSLATED]  
  summarization: true     # [TRANSLATED]
  extraction: true        # [TRANSLATED]

# [TRANSLATED]
data:
  root_dir: "data"
  # [TRANSLATED]：text_chunks（[TRANSLATED]，[TRANSLATED]）
  preferred_source: "text_chunks"
  # [TRANSLATED]：facts（[TRANSLATED]），tables（[TRANSLATED]）
  fallback_sources: ["facts", "tables"]

# [TRANSLATED]（[TRANSLATED]RAG）
retrieval:
  # [TRANSLATED]
  index_dir: "data/index"
  content_dir: "data/chunked"
  
  # [TRANSLATED]
  model: "BAAI/bge-base-en-v1.5"
  device: "cuda"  # [TRANSLATED] "cpu"
  
  # [TRANSLATED]
  use_reranker: true
  reranker_model: "cross-encoder/ms-marco-MiniLM-L-6-v2"
  
  # RRF[TRANSLATED]
  rrf_k: 60.0
  w_bm25: 1.0      # BM25[TRANSLATED]
  w_dense: 2.0     # Dense[TRANSLATED]
  ce_weight: 0.5   # Cross-encoder[TRANSLATED]
  
  # [TRANSLATED]
  bm25_topk: 200
  dense_topk: 200
  ce_candidates: 256
  final_topk: 10
  
  # [TRANSLATED]
  numeric_enhancement: true
  numeric_keywords: ["million", "billion", "thousand", "$", "revenue", "income", "profit", "%", "percent", "rate", "growth", "margin"]

# [TRANSLATED]
segmentation:
  method: "hybrid"  # fixed_length, semantic, hybrid
  max_tokens: 900
  overlap_tokens: 80
  use_title: true

# [TRANSLATED]
summarization:
  strategy: "refine"  # stuff, map_reduce, refine
  max_tokens: 2000
  temperature: 0.1

# [TRANSLATED]
extraction:
  method: "hybrid"     # llm, regex, hybrid
  regex_first: true    # hybrid[TRANSLATED]regex
  precision_mode: "direct"  # direct, shot
  
  # [TRANSLATED]
  numeric_patterns:
    currency: "\\$?[\\d,]+\\.?\\d*[MmBbKk]?"
    percentage: "\\d+\\.?\\d*%"
    number: "[-+]?\\d{1,3}(?:,\\d{3})*(?:\\.\\d+)?"
  
  # [TRANSLATED]
  confidence_threshold: 0.5

# LLM[TRANSLATED]
llm:
  provider: "deepseek"  # deepseek, openai, huggingface
  model_name: "deepseek-chat"
  temperature: 0.1
  max_tokens: 4096
  max_concurrent: 2
  
  # [TRANSLATED]
  enable_cache: true
  cache_ttl: 3600
  max_retries: 3
  
  # [TRANSLATED]
  rate_limit: 60  # [TRANSLATED]

# [TRANSLATED]
batch:
  max_workers: 4
  document_limit: 100  # [TRANSLATED]

# [TRANSLATED]
performance:
  # [TRANSLATED]
  cache_index: true
  # [TRANSLATED]
  cache_segments: true
  cache_retrieval: false
  
  # [TRANSLATED]
  llm_max_concurrency: 2

# [TRANSLATED]
evaluation:
  # RETA[TRANSLATED]
  reta_tolerances: [0.01, 0.03, 0.05, 0.10]
  
  # [TRANSLATED]
  save_results: true
  output_dir: "output/aie_results"

# [TRANSLATED]
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "logs/aie_numeric_retrieval.log"

# [TRANSLATED]
extraction_targets:
  financial_metrics:
    - name: "revenue"
      description: "[TRANSLATED]/[TRANSLATED]"
      data_type: "number"
      unit: "[TRANSLATED]"
      keywords: ["revenue", "net sales", "total revenue", "net revenue"]
    
    - name: "net_income"
      description: "[TRANSLATED]/[TRANSLATED]"
      data_type: "number"
      unit: "[TRANSLATED]"
      keywords: ["net income", "net earnings", "profit"]
    
    - name: "total_assets"
      description: "[TRANSLATED]"
      data_type: "number"
      unit: "[TRANSLATED]"
      keywords: ["total assets"]
    
    - name: "operating_income"
      description: "[TRANSLATED]"
      data_type: "number"
      unit: "[TRANSLATED]"
      keywords: ["operating income", "operating profit"]
    
    - name: "cash_and_equivalents"
      description: "[TRANSLATED]"
      data_type: "number"
      unit: "[TRANSLATED]"
      keywords: ["cash and cash equivalents", "cash"]
    
    - name: "total_debt"
      description: "[TRANSLATED]"
      data_type: "number"
      unit: "[TRANSLATED]"
      keywords: ["total debt", "total borrowings"]

  ratios:
    - name: "gross_margin"
      description: "[TRANSLATED]"
      data_type: "percentage"
      unit: "%"
      keywords: ["gross margin", "gross profit margin"]
    
    - name: "operating_margin"
      description: "[TRANSLATED]"
      data_type: "percentage"
      unit: "%"
      keywords: ["operating margin"]
    
    - name: "net_margin"
      description: "[TRANSLATED]"
      data_type: "percentage"
      unit: "%"
      keywords: ["net margin", "net profit margin"]

# [TRANSLATED]
example_queries:
  - query: "What was the company's revenue in 2023?"
    targets: ["revenue"]
    expected_type: "financial_metrics"
  
  - query: "What were the profit margins for the fiscal year?"
    targets: ["gross_margin", "operating_margin", "net_margin"]
    expected_type: "ratios"
  
  - query: "Show me the key financial metrics including revenue, profit, and assets."
    targets: ["revenue", "net_income", "total_assets"]
    expected_type: "financial_metrics"
